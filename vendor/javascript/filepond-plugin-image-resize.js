var e={};(function(t,r){e=r()})(0,(function(){var e=function isImage(e){return/^image/.test(e.type)};var t=function getImageSize(e,t){var r=new Image;r.onload=function(){var e=r.naturalWidth;var n=r.naturalHeight;r=null;t({width:e,height:n})};r.onerror=function(){return t(null)};r.src=e};var r=function plugin(r){var n=r.addFilter,i=r.utils;var a=i.Type;n("DID_LOAD_ITEM",(function(r,n){var i=n.query;return new Promise((function(n,a){var u=r.file;if(!e(u)||!i("GET_ALLOW_IMAGE_RESIZE"))return n(r);var o=i("GET_IMAGE_RESIZE_MODE");var l=i("GET_IMAGE_RESIZE_TARGET_WIDTH");var E=i("GET_IMAGE_RESIZE_TARGET_HEIGHT");var v=i("GET_IMAGE_RESIZE_UPSCALE");if(null===l&&null===E)return n(r);var d=null===l?E:l;var f=null===E?d:E;var c=URL.createObjectURL(u);t(c,(function(e){URL.revokeObjectURL(c);if(!e)return n(r);var t=e.width,i=e.height;var a=(r.getMetadata("exif")||{}).orientation||-1;if(a>=5&&a<=8){var u=[i,t];t=u[0];i=u[1]}if(t===d&&i===f)return n(r);if(!v)if("cover"===o){if(t<=d||i<=f)return n(r)}else if(t<=d&&i<=d)return n(r);r.setMetadata("resize",{mode:o,upscale:v,size:{width:d,height:f}});n(r)}))}))}));return{options:{allowImageResize:[true,a.BOOLEAN],imageResizeMode:["cover",a.STRING],imageResizeUpscale:[true,a.BOOLEAN],imageResizeTargetWidth:[null,a.INT],imageResizeTargetHeight:[null,a.INT]}}};var n="undefined"!==typeof window&&"undefined"!==typeof window.document;n&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:r}));return r}));var t=e;export default t;

